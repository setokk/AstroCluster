<div class="title-container">
    @if (chartDataPPC.length > 0) {
        <h2>Result for analysis {{ getAnalysisResponse!.analysisData.projectUUID }}</h2>
        <h3>Currently showing: <a style="user-select: none; cursor: pointer;" (click)="onClickCurrentlyShowing()">{{ activeChartTitle }}</a></h3>
    } @else {
        <h2></h2>
        <h3></h3>
    }
</div>

@if (chartDataPPC.length > 0) {
    <div class="flex-row-container">
        <!-- Left aligned content. Charts placement -->
        <div class="left-aligned-content">
            @if (activeChartTitle === 'Percentages per Cluster') {
                <ngx-charts-bar-horizontal
                        [view]="[900, 400]"
                        [results]="chartDataPPC"
                        [scheme]="colorSchemePPC"
                        [gradient]="false"
                        [xAxis]="true"
                        [yAxis]="true"
                        [legend]="true"
                        [showXAxisLabel]="true"
                        [xAxisLabel]="'Percentage (%)'"
                        [showYAxisLabel]="true"
                        [yAxisLabel]="'Cluster Labels'">
                </ngx-charts-bar-horizontal>
            } @else if (activeChartTitle === 'Cluster File Results') {
                <h3>Total number of analyzed files:
                    <a style="user-select: none;">
                        {{ this.getAnalysisResponse!.analysisData.clusterResults!.length }}
                    </a>
                </h3>
                <ngx-graph
                        class="chart-container"
                        [view]="[graphWidth, graphHeight]"
                        [nodes]="nodesFCL"
                        [links]="[]"
                        [autoCenter]="true">
                    <!-- Node Template -->
                    <ng-template #nodeTemplate let-node>
                        <svg:g [attr.transform]="translate(node.data.customX, node.data.customY)">
                            <svg:circle
                                    r="10"
                                    [attr.fill]="node.data.customColor"
                                    stroke="white"
                                    stroke-width="1">
                            </svg:circle>
                            <svg:text
                                    text-anchor="middle"
                                    y="4"
                                    font-size="10"
                                    fill="black">
                                {{ node.data.clusterLabel }}
                            </svg:text>
                            <svg:text
                                    text-anchor="middle"
                                    y="22"
                                    font-size="10"
                                    fill="white">
                                {{ node.label }}
                            </svg:text>
                        </svg:g>
                    </ng-template>
                </ngx-graph>
            }
        </div>

        <!-- Right aligned content. Specific options based on chart -->
        <div class="right-aligned-content">
            @if (activeChartTitle === 'Percentages per Cluster') {
                <label for="topClustersRange">Top K={{ topClustersValue }} Clusters:</label>
                <input type="range"
                       min="1" [max]="chartDataPPC.length" step="1" value="{{ topClustersValue }}"
                       [(ngModel)]="topClustersValue"
                       (change)="onChangeTopClustersValuePPC()"
                       name="topClustersRange" id="topClustersRange"/>
                <label for="lastClustersRange">Last N={{ lastClusterValue }} Clusters:</label>
                <input type="range"
                       min="1" max="{{ chartDataPPC.length }}" step="1" value="{{ lastClusterValue }}"
                       [(ngModel)]="lastClusterValue"
                       (change)="onChangeLastClustersValuePPC()"
                       name="lastClustersRange" id="lastClustersRange"/>
                <button (click)="onClickReset()">Reset</button>
            }
            <h3>Interest PDF generation:</h3>
        </div>
    </div>
}